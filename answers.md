# Ответы на вопросы для самоконтроля

## 1. В чем преимущества использования Express.js по сравнению с чистым Node.js для создания серверов?

**Преимущества Express.js:**
- **Упрощенная маршрутизация**: Встроенная система маршрутизации с поддержкой параметров и шаблонов URL
- **Middleware**: Гибкая система промежуточных обработчиков для логирования, аутентификации, валидации
- **Автоматическая обработка данных**: Встроенные парсеры для JSON, URL-encoded данных
- **Обработка ошибок**: Централизованная система обработки ошибок
- **Шаблонизаторы**: Поддержка различных шаблонизаторов для рендеринга HTML
- **Статические файлы**: Встроенная поддержка обслуживания статических файлов
- **Сообщество**: Большое количество готовых middleware и расширений
- **Стандартизация**: Единый подход к структуре приложения

## 2. Что такое middleware в Express.js и каков порядок их выполнения?

**Middleware** - это функции, которые имеют доступ к объектам запроса (req), ответа (res) и следующей функции middleware в цикле запрос-ответ.

**Порядок выполнения:**
1. Middleware выполняются в порядке их регистрации через `app.use()` или `app.METHOD()`
2. Каждый middleware должен либо завершить запрос (отправить ответ), либо вызвать `next()`
3. Если middleware не вызывает `next()`, последующие middleware не выполняются
4. Обработчики ошибок должны иметь 4 аргумента: `(err, req, res, next)`

## 3. Как организовать модульную структуру роутеров в Express приложении?

**Способы организации:**
1. **Разделение по функциональности**: Каждый модуль отвечает за определенную сущность
2. **Использование express.Router()**: Создание отдельных роутеров для разных endpoint'ов
3. **Файловая структура**:



4. Какие методы роутинга поддерживает Express.js и для чего они используются?
Основные HTTP-методы:

GET - получение ресурсов

POST - создание новых ресурсов

PUT - полное обновление ресурса

PATCH - частичное обновление ресурса

DELETE - удаление ресурса

HEAD - получение заголовков

OPTIONS - получение поддерживаемых методов

Специальные методы Express:

app.all() - обработка всех HTTP-методов

app.route() - цепочная обработка маршрута

5. Как обрабатывать параметры URL и query-параметры в Express?
Параметры URL (route parameters):

javascript
// Определение
app.get('/users/:id', (req, res) => {
  const userId = req.params.id; // Получение значения
});

// Вложенные параметры
app.get('/users/:userId/posts/:postId', (req, res) => {
  const { userId, postId } = req.params;
});
Query-параметры:

javascript
// GET /users?name=John&age=30
app.get('/users', (req, res) => {
  const { name, age } = req.query; // { name: 'John', age: '30' }
});
6. В чем разница между app.use() и app.METHOD()?
app.use():

Используется для регистрации middleware

Обрабатывает ВСЕ HTTP-методы

Может работать без указания пути (применяется ко всем маршрутам)

Подходит для глобальных middleware (логирование, CORS, аутентификация)

app.METHOD():

Обрабатывает конкретный HTTP-метод (GET, POST, PUT, etc.)

Требует указания пути

Используется для обработки конкретных endpoint'ов

7. Как организовать централизованную обработку ошибок в Express приложении?
Способы организации:

Middleware обработки ошибок (должен быть последним):

javascript
app.use((err, req, res, next) => {
  console.error(err);
  res.status(500).json({ error: 'Внутренняя ошибка сервера' });
});
Обработка асинхронных ошибок:

javascript
app.get('/route', async (req, res, next) => {
  try {
    // асинхронный код
  } catch (err) {
    next(err);
  }
});
Кастомные классы ошибок:

javascript
class NotFoundError extends Error {
  constructor(message) {
    super(message);
    this.status = 404;
  }
}
8. Что такое router.param() и для чего он используется?
router.param() - это middleware, которое выполняется когда в маршруте встречается определенный параметр.

Использование:

javascript
router.param('id', (req, res, next, id) => {
  // Поиск данных по ID
  const item = findItemById(id);
  if (!item) {
    return res.status(404).json({ error: 'Не найдено' });
  }
  
  req.item = item; // Добавление в объект запроса
  next();
});